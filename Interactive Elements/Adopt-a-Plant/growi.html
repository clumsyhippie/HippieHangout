<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GROWI - Virtual Plant Pet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        body {
            font-family: 'Press Start 2P', cursive;
            background-image: transparent;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            height: 100vh;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .device {
            position: absolute; /* Changed from relative to absolute */
            width: 450px;
            height: 750px;
            border-radius: 30px;
            background-color: #4CAF50;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 25px;
            image-rendering: pixelated;
            cursor: move; /* Shows a move cursor when hovering over the device */
            top: 50%; /* Initial position */
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }
        
        /* Add a handle at the top of the device to make it clear it's draggable */
        .drag-handle {
            width: 100px;
            height: 5px;
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .device::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border: 8px solid rgba(0, 0, 0, 0.2);
            border-radius: 30px;
            pointer-events: none;
            z-index: 10;
        }
        
        /* Pattern styles */
        .pattern-striped {
            background-image: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 15px,
                rgba(255, 255, 255, 0.2) 15px,
                rgba(255, 255, 255, 0.2) 30px
            );
        }
        
        .pattern-polka {
            background-image: radial-gradient(
                rgba(255, 255, 255, 0.2) 15%, 
                transparent 16%
            );
            background-size: 30px 30px;
        }
        
        .pattern-hearts {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Cpath d='M20 10 C 15 0, 5 5, 10 15 Q 15 25, 20 30 Q 25 25, 30 15 C 35 5, 25 0, 20 10 Z' fill='rgba(255,255,255,0.2)'/%3E%3C/svg%3E");
            background-size: 40px 40px;
        }
        
        .screen {
            width: 380px;
            height: 380px;
            background-color: #c3e6cb;
            border-radius: 15px;
            border: 10px solid #333;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 1;
        }
        
        .screen-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 15px;
            position: relative;
            z-index: 1;
        }
        
        /* Custom backgrounds for each plant species */
        .screen-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0.8;
            z-index: -1;
        }
        
        /* Sunflower - sunny field background */
        .screen-background.Sunflower {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='360' height='360' viewBox='0 0 360 360'%3E%3Crect width='360' height='360' fill='%23a7d9ff'/%3E%3Crect y='180' width='360' height='180' fill='%2392d36e'/%3E%3Ccircle cx='300' cy='60' r='40' fill='%23ffeb3b'/%3E%3C/svg%3E");
        }
        
        /* Rose - elegant indoor background with window */
        .screen-background.Rose {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='360' height='360' viewBox='0 0 360 360'%3E%3Crect width='360' height='360' fill='%23f5f5f5'/%3E%3Crect x='40' y='100' width='280' height='140' fill='%23d7ccc8'/%3E%3Crect y='240' width='360' height='120' fill='%23a67c52'/%3E%3Crect x='120' y='40' width='120' height='120' fill='%23a7d9ff'/%3E%3Crect x='120' y='40' width='120' height='120' fill='none' stroke='%23795548' stroke-width='8'/%3E%3Cline x1='180' y1='40' x2='180' y2='160' stroke='%23795548' stroke-width='8'/%3E%3Cline x1='120' y1='100' x2='240' y2='100' stroke='%23795548' stroke-width='8'/%3E%3C/svg%3E");
        }
        
        /* Marijuana - dark black/grey growhouse background with rectangular red light */
        .screen-background.Weed {
            background-color: #1a1a1a;
            background-image: 
                radial-gradient(ellipse at 50% 30%, rgba(255, 0, 0, 0.3) 0%, rgba(255, 0, 0, 0.1) 50%, transparent 70%),
                linear-gradient(to bottom, #1a1a1a 0%, #1a1a1a 100%);
        }
        
        /* Cactus - desert themed background */
        .screen-background.Cactus {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='360' height='360' viewBox='0 0 360 360'%3E%3Crect width='360' height='360' fill='%23ffefc0'/%3E%3Crect y='240' width='360' height='120' fill='%23e8c170'/%3E%3Ccircle cx='300' cy='60' r='40' fill='%23ffeb3b'/%3E%3C/svg%3E");
        }
        
        /* Pot container */
        .pot-container {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 80px;
            z-index: 1;
        }
        
        .pot-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            position: relative;
            bottom: -10px;
        }
        
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 0px auto auto 0px;
            position: relative;
            z-index: 2;
            background-color: rgba(195, 230, 203, 0.8);
            padding: 5px;
            border-radius: 5px;
        }
        
        .water-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .water-label {
            font-size: 10px;
            color: #333;
        }
        
        .water-bar {
            width: 100px;
            height: 18px;
            background-color: #ddd;
            border: 3px solid #333;
            position: relative;
        }
        
        .water-level {
            height: 100%;
            background-color: #4fc3f7;
            width: 25%;
            transition: width 0.5s;
        }
        
        .water-percentage {
            font-size: 10px;
            color: #333;
        }
        
        .growth-stage {
            font-size: 12px;
            background-color: #333;
            color: #fff;
            padding: 3px 8px;
            border-radius: 4px;
            white-space: nowrap;
            min-width: 100px;
            text-align: center;
            overflow: hidden;
            text-overflow: ellipsis;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .plant-name {
            text-align: center;
            font-size: 14px;
            margin: 8px 0;
            background-color: #333;
            color: #fff;
            padding: 5px;
            border-radius: 4px;
            position: relative;
            z-index: 2;
        }
        
        .plant-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        .plant-image {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            height: 200px;
            width: 100%;
            position: relative;
            z-index: 2;
        }
        
        .plant-image img {
            max-height: 180px;
            max-width: 100%;
            object-fit: contain;
            position: relative;
            z-index: 3;
        }
        
        /* Species-specific styling */
        .plant-image.Sunflower img {
            max-height: 180px;
            transform: translateY(-40px) translateX(5px); /* Raised more and moved right */
        }
        
        .plant-image.Weed img {
            max-height: 200px; /* Increased size */
            transform: translateY(30px); /* Lowered so bottom is under message box */
            transform: scale(2);
            top: -30px;
        }
        
        .plant-image.Rose img {
            max-height: 150px;
            transform: translateY(-30px); /* Raised slightly more */
        }
        
        .plant-image.Cactus img {
            max-height: 180px;
            transform: translateY(-30px) translateX(-10px); /* Raised slightly and moved left*/
        }
        
        .plant-message {
            position: absolute;
            bottom: 10px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 12px;
            font-style: italic;
            background-color: rgba(51, 51, 51, 0.8);
            color: white;
            padding: 8px;
            border-radius: 6px;
            margin: 0 15px;
            z-index: 5;
        }
        
        .buttons-container {
            width: 380px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 25px;
            position: relative;
            z-index: 1;
        }
        
        .main-buttons {
            display: flex;
            justify-content: space-between;
            gap: 15px;
        }
        
        .secondary-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .btn {
            padding: 12px;
            border: 4px solid #333;
            border-radius: 8px;
            font-size: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 0 #333;
        }
        
        .btn:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #333;
        }
        
        .btn-water {
            background-color: #4fc3f7;
            color: #333;
            flex: 1;
            padding: 15px 12px;
            font-size: 14px;
        }
        
        .btn-fertilize {
            background-color: #ffeb3b;
            color: #333;
            flex: 1;
            padding: 15px 12px;
            font-size: 14px;
        }
        
        .btn-fertilize.disabled, .btn-fertilize.matured {
            background-color: #aaa;
            cursor: not-allowed;
        }
        
        .btn-secondary {
            background-color: #9c27b0;
            color: white;
        }
        
        .power-button-container {
            width: 100%;
            display: flex;
            justify-content: center;
            margin-top: 25px;
            position: relative;
            z-index: 1;
        }
        
        .power-button {
            width: 65px;
            height: 65px;
            background-color: #c74545; /* Default darker color */
            border: 4px solid #333;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        
        .power-button:active {
            transform: scale(0.95);
        }
        
        .power-icon {
            width: 30px;
            height: 30px;
            position: relative;
        }
        
        .power-icon::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            width: 3px;
            height: 15px;
            background-color: white;
            transform: translateX(-50%);
        }
        
        .power-icon::after {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            width: 24px;
            height: 24px;
            border: 3px solid white;
            border-radius: 50%;
            transform: translateX(-50%);
            clip-path: polygon(0 15%, 100% 15%, 100% 100%, 0 100%);
        }
        
        .screen-off {
            background-color: #333;
        }
        
        .screen-off .screen-content,
        .screen-off .startup-screen,
        .screen-off .shutdown-screen,
        .screen-off .adoption-screen,
        .screen-off .naming-screen {
            display: none !important;
        }
        
        .startup-screen, .shutdown-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #0f0;
            z-index: 10;
        }
        
        .loading-bar-container {
            width: 80%;
            height: 25px;
            border: 3px solid #0f0;
            margin-top: 25px;
        }
        
        .loading-bar {
            height: 100%;
            background-color: #0f0;
            width: 0%;
        }
        
        .modal {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 20;
            padding: 15px;
            box-sizing: border-box;
        }
        
        .modal-content {
            background-color: #c3e6cb;
            border: 6px solid #333;
            border-radius: 12px;
            padding: 15px;
            width: 90%;
            max-height: 90%;
            overflow-y: auto;
            font-size: 10px;
        }
        
        .modal-title {
            text-align: center;
            margin-bottom: 15px;
            font-size: 14px;
            background-color: #333;
            color: white;
            padding: 8px;
            border-radius: 6px;
        }
        
        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }
        
        .modal-btn {
            padding: 8px 15px;
            border: 3px solid #333;
            border-radius: 6px;
            font-size: 10px;
            cursor: pointer;
            background-color: #9c27b0;
            color: white;
        }
        
        .plant-option {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            cursor: pointer;
            padding: 8px;
            border-radius: 6px;
        }
        
        .plant-option:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }
        
        .plant-option.selected {
            background-color: rgba(0, 0, 0, 0.2);
        }
        
        .color-wheel {
            width: 100%;
            height: 40px;
            margin: 15px 0;
            border-radius: 20px;
            border: 3px solid #333;
            background: linear-gradient(to right, 
                hsl(0, 100%, 85%), 
                hsl(60, 100%, 85%), 
                hsl(120, 100%, 85%), 
                hsl(180, 100%, 85%), 
                hsl(240, 100%, 85%), 
                hsl(300, 100%, 85%), 
                hsl(360, 100%, 85%)
            );
            -webkit-appearance: none;
            appearance: none;
            cursor: pointer;
        }
        
        .color-wheel::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 40px;
            background: white;
            border: 3px solid #333;
            border-radius: 12px;
        }
        
        .color-wheel::-moz-range-thumb {
            width: 25px;
            height: 40px;
            background: white;
            border: 3px solid #333;
            border-radius: 12px;
        }
        
        .pattern-options, .personality-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin: 15px 0;
        }
        
        .pattern-option, .personality-option {
            padding: 8px;
            border: 3px solid #333;
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
        }
        
        .pattern-option.selected, .personality-option.selected {
            background-color: #9c27b0;
            color: white;
        }
        
        .stats-item {
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
        }
        
        .hidden {
            display: none;
        }
        
        /* Growth animation */
        @keyframes grow {
            0% { transform: scale(0.8); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .growing {
            animation: grow 2s ease-in-out;
        }
        
        /* Adoption screen */
        .adoption-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #c3e6cb;
            display: flex;
            flex-direction: column;
            padding: 15px;
            z-index: 15;
            box-sizing: border-box;
        }
        
        .adoption-title {
            text-align: center;
            font-size: 16px;
            margin-bottom: 15px;
            background-color: #333;
            color: white;
            padding: 8px;
            border-radius: 6px;
        }
        
        .adoption-subtitle {
            text-align: center;
            font-size: 12px;
            margin-bottom: 15px;
        }
        
        .plant-selection {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
            flex-grow: 1;
            overflow-y: auto;
        }
        
        .plant-selection-option {
            background-color: #fff;
            border: 3px solid #333;
            border-radius: 6px;
            padding: 10px;
            text-align: center;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .plant-selection-option:hover {
            background-color: #e0e0e0;
        }
        
        .plant-selection-option.selected {
            background-color: #9c27b0;
            color: white;
        }
        
        .adoption-button {
            background-color: #9c27b0;
            color: white;
            padding: 10px 20px;
            border: 3px solid #333;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            margin-top: 10px;
            align-self: center;
        }
        
        .adoption-button:disabled {
            background-color: #aaa;
            cursor: not-allowed;
        }
        
        /* Naming screen */
        .naming-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #c3e6cb;
            display: flex;
            flex-direction: column;
            padding: 15px;
            z-index: 15;
            box-sizing: border-box;
        }
        
        .naming-title {
            text-align: center;
            font-size: 16px;
            margin-bottom: 15px;
            background-color: #333;
            color: white;
            padding: 8px;
            border-radius: 6px;
        }
        
        .naming-subtitle {
            text-align: center;
            font-size: 12px;
            margin-bottom: 15px;
            padding: 0 10px;
        }
        
        .naming-input-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 30px;
            flex-grow: 1;
        }
        
        .naming-input {
            width: 100%;
            padding: 10px;
            font-size: 12px;
            border: 3px solid #333;
            border-radius: 6px;
            text-align: center;
            margin-bottom: 30px;
            box-sizing: border-box;
        }
        
        .naming-button {
            background-color: #9c27b0;
            color: white;
            padding: 10px 20px;
            border: 3px solid #333;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            align-self: center;
            margin-top: auto;
        }
        
        .naming-button:disabled {
            background-color: #aaa;
            cursor: not-allowed;
        }
    </style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.16 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.mb-1{margin-bottom:0.25rem}.mb-2{margin-bottom:0.5rem}.mb-3{margin-bottom:0.75rem}.hidden{display:none}.w-full{width:100%}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:0.25rem}.border-2{border-width:2px}.border-gray-800{--tw-border-opacity:1;border-color:rgb(31 41 55 / var(--tw-border-opacity, 1))}.p-2{padding:0.5rem}.text-center{text-align:center}.text-xs{font-size:0.75rem;line-height:1rem}</style></head>
<body>
    <div id="device" class="device" style="background-color: rgb(76, 175, 80);">
        <div id="screen" class="screen screen-off">
            <div id="screenContent" class="screen-content" style="visibility: visible;">
                <div id="screenBackground" class="screen-background Sunflower"></div>
                <div class="status-bar">
                    <div class="water-container">
                        <div class="water-label">WATER:</div>
                        <div class="water-bar">
                            <div id="waterLevel" class="water-level" style="width: 24%;"></div>
                        </div>
                        <div id="waterPercentage" class="water-percentage">24%</div>
                    </div>
                    <div id="growthStage" class="growth-stage">Seedling</div>
                </div>
                <div id="plantName" class="plant-name">bill</div>
                <div class="plant-container">
                    <div id="plantImage" class="plant-image Sunflower"><img src="../Adopt-a-Plant/Plant/Sunflower1.png" alt="Sunflower"></div>
                    <!-- Pot image container - hidden for Weed species -->
                    <div id="potContainer" class="pot-container" style="display: block;">
                        <img src="../Adopt-a-Plant/Plant/Pot.png" alt="Flower Pot" class="pot-image">
                    </div>
                    <div id="plantMessage" class="plant-message">What a beautiful day!</div>
                </div>
            </div>
            
            <!-- Startup Screen -->
            <div id="startupScreen" class="startup-screen" style="display: none;">
                <div>GROWI v1.0</div>
                <div>BOOTING UP...</div>
                <div class="loading-bar-container">
                    <div id="startupLoadingBar" class="loading-bar" style="width: 100%;"></div>
                </div>
            </div>
            
            <!-- Shutdown Screen -->
            <div id="shutdownScreen" class="shutdown-screen" style="display: none;">
                <div>SHUTTING DOWN...</div>
            </div>
            
            <!-- Adoption Screen -->
            <div id="adoptionScreen" class="adoption-screen hidden" style="display: none;">
                <div class="adoption-title">WELCOME TO GROWI</div>
                <div class="adoption-subtitle">Choose a plant to adopt:</div>
                
                <div class="plant-selection">
                    <div class="plant-selection-option" data-plant="Sunflower">Sunflower</div>
                    <div class="plant-selection-option" data-plant="Rose">Rose</div>
                    <div class="plant-selection-option" data-plant="Weed">Marijuana</div>
                    <div class="plant-selection-option" data-plant="Cactus">Cactus</div>
                </div>
                
                <button id="adoptButton" class="adoption-button" disabled="">ADOPT</button>
            </div>
            
            <!-- Naming Screen -->
            <div id="namingScreen" class="naming-screen hidden" style="display: none;">
                <div class="naming-title">NAME YOUR PLANT</div>
                <div class="naming-subtitle">What would you like to name your plant?</div>
                
                <div class="naming-input-container">
                    <input type="text" id="plantNameInput" class="naming-input" maxlength="12" placeholder="Enter a name">
                    <button id="confirmNameButton" class="naming-button" disabled="">CONFIRM</button>
                </div>
            </div>
        </div>
        
        <div class="buttons-container">
            <div class="main-buttons">
                <div id="btnWater" class="btn btn-water">WATER</div>
                <div id="btnFertilize" class="btn btn-fertilize">FERTILIZE</div>
            </div>
            <div class="secondary-buttons">
                <div id="btnRename" class="btn btn-secondary">RENAME</div>
                <div id="btnChangePlant" class="btn btn-secondary">CHANGE PLANT</div>
                <div id="btnStats" class="btn btn-secondary">STATS</div>
                <div id="btnSettings" class="btn btn-secondary">SETTINGS</div>
            </div>
        </div>
        
        <div class="power-button-container">
            <div id="powerButton" class="power-button" style="background-color: rgb(46, 125, 50);">
                <div class="power-icon"></div>
            </div>
        </div>
        
        <!-- Rename Modal -->
        <div id="renameModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-title">RENAME YOUR PLANT</div>
                <input type="text" id="newPlantName" maxlength="12" class="w-full p-2 border-2 border-gray-800 rounded text-xs mb-2">
                <div class="modal-buttons">
                    <div id="saveRenameBtn" class="modal-btn">SAVE</div>
                    <div id="cancelRenameBtn" class="modal-btn">CANCEL</div>
                </div>
            </div>
        </div>
        
        <!-- Change Plant Modal -->
        <div id="changePlantModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-title">CHOOSE A PLANT</div>
                <div id="plantOptions">
                    <div class="plant-option" data-plant="Sunflower">Sunflower</div>
                    <div class="plant-option" data-plant="Rose">Rose</div>
                    <div class="plant-option" data-plant="Weed">Marijuana</div>
                    <div class="plant-option" data-plant="Cactus">Cactus</div>
                </div>
                <div class="modal-buttons">
                    <div id="savePlantBtn" class="modal-btn">SAVE</div>
                    <div id="cancelPlantBtn" class="modal-btn">CANCEL</div>
                </div>
            </div>
        </div>
        
        <!-- Change Plant Confirmation Modal -->
        <div id="changePlantConfirmModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-title">ARE YOU SURE?</div>
                <p class="text-center mb-3">Changing your plant will reset your growth progress!</p>
                <div class="modal-buttons">
                    <div id="confirmChangePlantBtn" class="modal-btn" style="background-color: #f44336;">CHANGE</div>
                    <div id="cancelChangePlantBtn" class="modal-btn">CANCEL</div>
                </div>
            </div>
        </div>
        
        <!-- Stats Modal -->
        <div id="statsModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-title">PLANT STATS</div>
                <div id="statsContent">
                    <div class="stats-item">
                        <span>Name:</span>
                        <span id="statName">bill</span>
                    </div>
                    <div class="stats-item">
                        <span>Water:</span>
                        <span id="statWater">24%</span>
                    </div>
                    <div class="stats-item">
                        <span>Age:</span>
                        <span id="statAge">0 days</span>
                    </div>
                    <div class="stats-item">
                        <span>Species:</span>
                        <span id="statSpecies">Sunflower</span>
                    </div>
                    <div class="stats-item">
                        <span>Growth Stage:</span>
                        <span id="statGrowth">Seedling</span>
                    </div>
                    <div class="stats-item">
                        <span>Times Watered:</span>
                        <span id="statWatered">0</span>
                    </div>
                    <div class="stats-item">
                        <span>Personality:</span>
                        <span id="statPersonality">Cheerful</span>
                    </div>
                </div>
                <div class="modal-buttons">
                    <div id="closeStatsBtn" class="modal-btn">CLOSE</div>
                </div>
            </div>
        </div>
        
        <!-- Settings Modal -->
        <div id="settingsModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-title">SETTINGS</div>
                
                <div class="mb-2">
                    <div class="mb-1">Case Color:</div>
                    <input type="range" id="colorPicker" class="color-wheel" min="0" max="360" value="120">
                </div>
                
                <div class="mb-2">
                    <div class="mb-1">Pattern:</div>
                    <div class="pattern-options">
                        <div class="pattern-option selected" data-pattern="plain">Plain</div>
                        <div class="pattern-option" data-pattern="hearts">Hearts</div>
                        <div class="pattern-option" data-pattern="striped">Striped</div>
                        <div class="pattern-option" data-pattern="polka">Polka Dots</div>
                    </div>
                </div>
                
                <div class="mb-2">
                    <div class="mb-1">Personality:</div>
                    <div class="personality-options">
                        <div class="personality-option selected" data-personality="cheerful">Cheerful</div>
                        <div class="personality-option" data-personality="funny">Funny</div>
                        <div class="personality-option" data-personality="chill">Chill</div>
                        <div class="personality-option" data-personality="moody">Moody</div>
                    </div>
                </div>
                
                <div class="mb-2">
                    <div id="helpBtn" class="modal-btn w-full mb-2">HELP</div>
                    <div id="resetBtn" class="modal-btn w-full" style="background-color: #f44336;">RESET PLANT</div>
                </div>
                
                <div class="modal-buttons">
                    <div id="saveSettingsBtn" class="modal-btn">SAVE</div>
                    <div id="cancelSettingsBtn" class="modal-btn">CANCEL</div>
                </div>
            </div>
        </div>
        
        <!-- Help Modal -->
        <div id="helpModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-title">HELP</div>
                <div class="overflow-y-auto text-xs">
                    <p class="mb-2"><b>WATER:</b> Water your plant to increase water level. Plants need water to survive!</p>
                    <p class="mb-2"><b>FERTILIZE:</b> Give your plant nutrients once every 24 hours to help it grow to the next stage.</p>
                    <p class="mb-2"><b>RENAME:</b> Give your plant a new name.</p>
                    <p class="mb-2"><b>CHANGE PLANT:</b> Choose a different plant species. This will reset your growth progress.</p>
                    <p class="mb-2"><b>STATS:</b> View detailed information about your plant.</p>
                    <p class="mb-2"><b>SETTINGS:</b> Customize your GROWI device and plant personality.</p>
                    <p class="mb-2"><b>POWER:</b> Turn your GROWI device on or off.</p>
                </div>
                <div class="modal-buttons">
                    <div id="closeHelpBtn" class="modal-btn">CLOSE</div>
                </div>
            </div>
        </div>
        
        <!-- Reset Confirmation Modal -->
        <div id="resetConfirmModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-title">ARE YOU SURE?</div>
                <p class="text-center mb-3">This will reset your plant and all progress will be lost!</p>
                <div class="modal-buttons">
                    <div id="confirmResetBtn" class="modal-btn" style="background-color: #f44336;">RESET</div>
                    <div id="cancelResetBtn" class="modal-btn">CANCEL</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DOM elements
        const device = document.getElementById('device');
        const screen = document.getElementById('screen');
        const screenContent = document.getElementById('screenContent');
        const screenBackground = document.getElementById('screenBackground');
        const waterLevel = document.getElementById('waterLevel');
        const waterPercentage = document.getElementById('waterPercentage');
        const growthStage = document.getElementById('growthStage');
        const plantName = document.getElementById('plantName');
        const plantImage = document.getElementById('plantImage');
        const plantMessage = document.getElementById('plantMessage');
        const potContainer = document.getElementById('potContainer');
        const btnWater = document.getElementById('btnWater');
        const btnFertilize = document.getElementById('btnFertilize');
        const btnRename = document.getElementById('btnRename');
        const btnChangePlant = document.getElementById('btnChangePlant');
        const btnStats = document.getElementById('btnStats');
        const btnSettings = document.getElementById('btnSettings');
        const powerButton = document.getElementById('powerButton');
        const startupScreen = document.getElementById('startupScreen');
        const shutdownScreen = document.getElementById('shutdownScreen');
        const adoptionScreen = document.getElementById('adoptionScreen');
        const namingScreen = document.getElementById('namingScreen');
        const startupLoadingBar = document.getElementById('startupLoadingBar');
        
        // Sound effects
        const buttonSound = new Audio('../Adopt-a-Plant/Sounds/button.mp3');
        
        
        const powerOnSound = new Audio('../Adopt-a-Plant/Sounds/on.mp3');
        const powerOffSound = new Audio('../Adopt-a-Plant/Sounds/off.mp3');
        
        // Adoption screen elements
        const plantSelectionOptions = document.querySelectorAll('.plant-selection-option');
        const adoptButton = document.getElementById('adoptButton');
        
        // Naming screen elements
        const plantNameInput = document.getElementById('plantNameInput');
        const confirmNameButton = document.getElementById('confirmNameButton');
        
        // Growth stage names
        const growthStageNames = {
            1: "Seedling",
            2: "Sapling",
            3: "Growing",
            4: "Budding",
            5: "Blooming",
            6: "Mature"
        };
        
        // Plant data and state
        let isPoweredOn = false;
        let waterTimer;
        let fertilizeTimer;
        let growthAnimationTimer;
        let isGrowthAnimating = false;
        let lastAction = null; // Track the last action performed
        let wasOverwatered = false; // Track if the plant was overwatered
        let selectedNewPlant = null; // Track the newly selected plant
        let isFirstTime = true; // Track if this is the first time opening the app
        let selectedPlantSpecies = null; // Track the selected plant species during adoption
        let plantData = {
            name: 'Sunny',
            species: 'Sunflower',
            waterLevel: 25,
            growthStage: 1,
            age: 0,
            timesWatered: 0,
            personality: 'cheerful',
            lastFertilized: null,
            fertilizeCountdown: 0,
            createdAt: new Date().toISOString()
        };
        
        // Device customization
        let deviceCustomization = {
            color: 120,
            pattern: 'plain'
        };
        
        // Personality messages
        const personalityMessages = {
            cheerful: {
                greeting: ["Hello friend!", "What a beautiful day!", "I'm so happy to see you!"],
                watered: ["Ahh, refreshing!", "Thank you for the water!", "Yay! Water!"],
                overwatered: ["Whoa! Too much water!", "I'm drowning! But still happy!", "Splash! That's a lot!"],
                fertilized: ["Nutrients! Delicious!", "I feel stronger already!", "Growing power activated!"],
                thirsty: ["Could use some water!", "A little thirsty today!", "Water would be nice!"],
                growing: ["I'm growing!", "Look at me grow!", "Getting bigger!"],
                renamed: ["I love my new name!", "New name, same plant!", "You can call me {name}!"],
                changed: ["New look, same me!", "I feel different!", "Change is good!"]
            },
            funny: {
                greeting: ["Leaf me alone... just kidding!", "I'm rooting for you!", "What's up? I am, literally!"],
                watered: ["Ahh, H2-Oh yes!", "Water you waiting for? I'm growing!", "Splish splash I was taking a bath!"],
                overwatered: ["Help! I can't swim!", "I'm not a water lily, you know!", "Glub glub... too much!"],
                fertilized: ["That's some good poop!", "Mmm, tasty dirt nutrients!", "Is this organic? Just asking!"],
                thirsty: ["My soil is drier than your jokes!", "Water you doing? I'm thirsty!", "SOS: Save Our Soil!"],
                growing: ["I'm having a growth spurt!", "Getting taller! Soon I'll need my own apartment!", "Growing like a weed... wait, I'm not a weed!"],
                renamed: ["You can call me {name}... or whatever!", "New name? I barely remembered the old one!", "Identity crisis averted!"],
                changed: ["New species, who dis?", "I've had a makeover!", "Do these leaves make me look fat?"]
            },
            chill: {
                greeting: ["Hey there.", "Sup?", "Just chillin'."],
                watered: ["Thanks, man.", "Cool water, dude.", "Hydration station."],
                overwatered: ["Whoa, easy there.", "That's plenty, thanks.", "I'm good, really."],
                fertilized: ["Nice nutrients.", "Feeling stronger.", "Good stuff."],
                thirsty: ["Could use some water.", "Bit dry here.", "Water would be cool."],
                growing: ["Growing steadily.", "Making progress.", "One day at a time."],
                renamed: ["New name. Cool.", "{name}. I like it.", "I can work with {name}."],
                changed: ["New look. Nice.", "Change is chill.", "Different vibe now."]
            },
            moody: {
                greeting: ["Oh, it's you.", "What do you want?", "I guess we're doing this again."],
                watered: ["Finally, some water.", "Took you long enough.", "I suppose I should say thanks."],
                overwatered: ["Are you TRYING to drown me?", "Too much! Can't you tell?", "Great, now I'm soaked."],
                fertilized: ["Hmph, acceptable nutrients.", "Could be better quality.", "I guess this will do."],
                thirsty: ["I'm DYING of thirst here!", "Hello? Water? Remember me?", "So you're just going to let me dry out?"],
                growing: ["Growing despite your care.", "Somehow I'm still alive.", "One more stage of this torture."],
                renamed: ["Fine, call me {name} then.", "Whatever, {name} it is.", "I preferred my old name."],
                changed: ["Oh great, a new identity crisis.", "I was just getting used to my old self.", "This better be an improvement."]
            }
        };
        
        // Marijuana-specific messages
        const weedMessages = {
            cheerful: {
                greeting: ["Hi! I'm your happy little plant!", "Growing green and feeling great!", "What a beautiful day to grow!"],
                watered: ["Ahhh, that's the good stuff!", "Water makes me stronger!", "Thanks for the drink!"],
                overwatered: ["Whoa! That's a lot of water!", "Even I can drown!", "I'm floating away!"],
                fertilized: ["Nutrients! Now I'll grow big and strong!", "I feel super energized now!", "Watch me flourish!"],
                thirsty: ["Could use some water, friend!", "A little thirsty over here!", "Water please!"],
                growing: ["Growing taller every day!", "Can't stop me now!", "Watch me reach new heights!"],
                renamed: ["I love my new name {name}!", "You can call me {name}!", "{name} the magnificent!"],
                changed: ["I've been transformed!", "New look, same good vibes!", "Ready for a fresh start!"]
            },
            funny: {
                greeting: ["I'm the plant they warned you about!", "High there! Get it?", "Ready to grow some good times!"],
                watered: ["Hydration for elevation!", "Water you doing? Helping me get high?", "Thanks for the growth juice!"],
                overwatered: ["Whoa, I'm drowning in attention here!", "I'm not an aquatic plant!", "Too much of a good thing!"],
                fertilized: ["Oh yeah, that's the good stuff!", "Fertilizer? More like super-power!", "I'm gonna be so tall!"],
                thirsty: ["I'm drier than your humor right now!", "Thirstier than a stoner with munchies!", "Water me or I'll get cranky!"],
                growing: ["Growing higher than your expectations!", "One day you'll be proud of this care!", "Unstoppable growth activated!"],
                renamed: ["Call me {name}, bringer of chill vibes!", "{name} the relaxation specialist!", "My new name {name} is totally groovy!"],
                changed: ["New form, same mission: good times!", "You've unleashed a new strain!", "This isn't even my final form!"]
            },
            chill: {
                greeting: ["Just growing and flowing.", "Vibing in this pot.", "No stress, just growth."],
                watered: ["Cool, thanks for the water.", "Hydration appreciated.", "Nice water, dude."],
                overwatered: ["Whoa, that's plenty.", "Easy with the water.", "I'm good, really."],
                fertilized: ["Nice boost.", "Extra strength. Cool.", "Growing power up."],
                thirsty: ["Could use some water.", "Bit dry in here.", "Water would be nice."],
                growing: ["Growing at my own pace.", "Can't rush perfection.", "Taking it one leaf at a time."],
                renamed: ["{name}. I can work with that.", "Cool name. {name} it is.", "{name} the relaxed. Nice."],
                changed: ["New look. Same attitude.", "Different plant. Same vibe.", "Change is whatever."]
            },
            moody: {
                greeting: ["Oh great, it's the human.", "What, expecting me to be happy?", "I don't need your attention."],
                watered: ["Water? I survive on neglect, you know.", "I would have been fine without it.", "I suppose that helps."],
                overwatered: ["Are you trying to drown me?", "Even I have limits with water!", "Great, now I'm waterlogged."],
                fertilized: ["Oh sure, NOW you want me to grow.", "Fertilizer won't make me like you more.", "I was doing fine without your help."],
                thirsty: ["I'm literally dying of thirst here!", "Even I need SOME water!", "Your neglect is impressive."],
                growing: ["Growing despite your pathetic care.", "You can't kill me that easily.", "I'll outlive your gardening phase."],
                renamed: ["Fine, call me {name} then.", "Whatever, {name} it is.", "I preferred my old name."],
                changed: ["Oh great, a new identity crisis.", "I was just getting used to being me.", "This better be an improvement."]
            }
        };
        
        // Initialize
        function init() {
            loadData();
            updateDisplay();
            setupEventListeners();
            startWaterTimer();
            updateFertilizeButton();
            updateDeviceAppearance();
            
            // Make sure the device starts powered off
            isPoweredOn = false;
            screen.classList.add('screen-off');
        }
        
        // Load data from localStorage
        function loadData() {
            const savedPlantData = localStorage.getItem('growiPlantData');
            const savedDeviceCustomization = localStorage.getItem('growiDeviceCustomization');
            
            if (savedPlantData) {
                plantData = JSON.parse(savedPlantData);
                isFirstTime = false;
                
                // Calculate water loss since last visit
                const lastSaved = new Date(plantData.lastSaved || plantData.createdAt);
                const now = new Date();
                const minutesPassed = Math.floor((now - lastSaved) / (1000 * 60));
                const waterLoss = Math.floor(minutesPassed / 30); // 1% every 30 minutes
                
                if (waterLoss > 0) {
                    plantData.waterLevel = Math.max(0, plantData.waterLevel - waterLoss);
                }
                
                // Update fertilize countdown
                if (plantData.lastFertilized) {
                    const lastFertilized = new Date(plantData.lastFertilized);
                    const hoursPassed = (now - lastFertilized) / (1000 * 60 * 60);
                    if (hoursPassed < 24) {
                        plantData.fertilizeCountdown = Math.ceil(24 - hoursPassed);
                    } else {
                        plantData.fertilizeCountdown = 0;
                    }
                }
                
                // Update age in days
                const createdAt = new Date(plantData.createdAt);
                plantData.age = Math.floor((now - createdAt) / (1000 * 60 * 60 * 24));
            } else {
                isFirstTime = true;
            }
            
            if (savedDeviceCustomization) {
                deviceCustomization = JSON.parse(savedDeviceCustomization);
            }
        }
        
        // Save data to localStorage
        function saveData() {
            plantData.lastSaved = new Date().toISOString();
            localStorage.setItem('growiPlantData', JSON.stringify(plantData));
            localStorage.setItem('growiDeviceCustomization', JSON.stringify(deviceCustomization));
        }
        
        // Update display based on current data
        function updateDisplay() {
            // Update water level
            waterLevel.style.width = `${plantData.waterLevel}%`;
            waterPercentage.textContent = `${plantData.waterLevel}%`;
            
            // Update growth stage with named stages
            growthStage.textContent = growthStageNames[plantData.growthStage] || `Stage ${plantData.growthStage}`;
            
            // Update plant name
            plantName.textContent = plantData.name;
            
            // Update screen background based on plant species
            screenBackground.className = `screen-background ${plantData.species}`;
            
            // Show/hide pot based on plant species
            if (plantData.species === 'Weed') {
                potContainer.style.display = 'none';
            } else {
                potContainer.style.display = 'block';
            }
            
            // Update plant image
            updatePlantImage(false);
            
            // Update plant message based on last action
            updatePlantMessage();

            
            // Update stats
            document.getElementById('statName').textContent = plantData.name;
            document.getElementById('statWater').textContent = `${plantData.waterLevel}%`;
            document.getElementById('statAge').textContent = `${plantData.age} days`;
            document.getElementById('statSpecies').textContent = plantData.species === 'Weed' ? 'Marijuana' : plantData.species;
            document.getElementById('statGrowth').textContent = growthStageNames[plantData.growthStage] || `Stage ${plantData.growthStage}`;
            document.getElementById('statWatered').textContent = plantData.timesWatered;
            document.getElementById('statPersonality').textContent = plantData.personality.charAt(0).toUpperCase() + plantData.personality.slice(1);
            
            saveData();
            console.log(plantData.growthStage)
            
            
        }
        
        // Update plant image based on species and growth stage
        function updatePlantImage(animate = false) {
            // Get the correct image path based on species and growth stage
            const imagePath = `../Adopt-a-Plant/Plant/${plantData.species}${plantData.growthStage}.png`;
            
            // Add species-specific class to the plant image container
            plantImage.className = `plant-image ${plantData.species}`;
            
            if (animate) {
                // Show animation when growing
                plantImage.innerHTML = `<img src="${imagePath}" alt="${plantData.species}" class="growing">`;
                
                // Start growth animation
                isGrowthAnimating = true;
                
                // After animation completes, show static image
                clearTimeout(growthAnimationTimer);
                growthAnimationTimer = setTimeout(() => {
                    plantImage.innerHTML = `<img src="${imagePath}" alt="${plantData.species}">`;
                    isGrowthAnimating = false;
                }, 2000); // Animation duration
            } else {
                // Show static image for current growth stage
                plantImage.innerHTML = `<img src="${imagePath}" alt="${plantData.species}">`;
            }
        }
        
        // Update plant message based on personality and state
        function updatePlantMessage() {
            document.getElementById("plantMessage").style.display = "block"
            // Choose the right message set based on plant species
            let messages;
            if (plantData.species === 'Weed') {
                messages = weedMessages[plantData.personality];
            } else {
                messages = personalityMessages[plantData.personality];
            }
            
            let messageType;
            
            // Choose message type based on last action or state
            if (lastAction === 'water') {
                messageType = wasOverwatered ? 'overwatered' : 'watered';
                wasOverwatered = false; // Reset the overwatered flag
            } else if (lastAction === 'fertilize') {
                messageType = 'fertilized';
            } else if (lastAction === 'rename') {
                messageType = 'renamed';
            } else if (lastAction === 'change') {
                messageType = 'changed';
            } else if (plantData.waterLevel < 10) {
                messageType = 'thirsty';
            } else {
                // Default to greeting
                messageType = 'greeting';
            }
            
            const messageArray = messages[messageType];
            const randomIndex = Math.floor(Math.random() * messageArray.length);
            let message = messageArray[randomIndex];
            
            // Replace {name} placeholder with actual plant name
            message = message.replace('{name}', plantData.name);
            
            plantMessage.textContent = message;
            
            // Reset lastAction after displaying the message
            if (lastAction !== null && lastAction !== 'fertilize') {
                setTimeout(() => {
                    lastAction = null;
                }, 5000);
            }

            
            setTimeout(() => {
                document.getElementById("plantMessage").style.display = 'none'
            }, 7000);

            

            
        }
        
        // Start water timer (decreases water level over time)
        function startWaterTimer() {
            clearInterval(waterTimer);
            waterTimer = setInterval(() => {
                if (isPoweredOn && plantData.waterLevel > 0) {
                    plantData.waterLevel = Math.max(0, plantData.waterLevel - 1);
                    updateDisplay();
                }
            }, 30 * 60 * 1000); // 30 minutes in milliseconds (1% every 30 minutes)
        }
        
        // Update fertilize button state
        function updateFertilizeButton() {
            if (parseInt(plantData.growthStage) < 6) {clearInterval(fertilizeTimer)};
            plantData.fertilizeCountdown = 0; // Reset fertilize countdown
            if (plantData.fertilizeCountdown > 0 || (parseInt(plantData.growthStage) == 6)) {
                btnFertilize.classList.add('disabled');
                const hours = Math.floor(plantData.fertilizeCountdown);
                const minutes = Math.floor((plantData.fertilizeCountdown - hours) * 60);
                btnFertilize.textContent = `${hours}h ${minutes}m`;
                
                fertilizeTimer = setInterval(() => {
                    if (isPoweredOn) {
                        plantData.fertilizeCountdown -= 1/60; // Decrease by 1 minute
                        if (plantData.fertilizeCountdown <= 0) {
                            plantData.fertilizeCountdown = 0;
                            btnFertilize.classList.remove('disabled');
                            btnFertilize.textContent = 'FERTILIZE';
                            clearInterval(fertilizeTimer);
                        } else {
                            const hours = Math.floor(plantData.fertilizeCountdown);
                            const minutes = Math.floor((plantData.fertilizeCountdown - hours) * 60);
                            btnFertilize.textContent = `${hours}h ${minutes}m`;
                        }
                        saveData();
                    }
                }, 60 * 1000); // Update every minute for the 24-hour countdown
            } else {
                btnFertilize.classList.remove('disabled');
                btnFertilize.textContent = (parseInt(plantData.growthStage) == 6 ? "I'M GROWN" : 'FERTILIZE');
            }
        }
        
        // Update device appearance based on customization
        function updateDeviceAppearance() {


            // Update color (using HSL for pastel colors)
            const hue = deviceCustomization.color;
            
            // For green color (around 120 hue), use a more solid green
            if (hue >= 100 && hue <= 140) {
                device.style.backgroundColor = '#4CAF50'; // Solid green color
                powerButton.style.backgroundColor = '#2E7D32'; // Darker green for power button
            } else {
                device.style.backgroundColor = `hsl(${hue}, 100%, 85%)`;
                // Make power button a darker version of the device color
                powerButton.style.backgroundColor = `hsl(${hue}, 100%, 35%)`;
            }
            
            // Remove all pattern classes first
            device.classList.remove('pattern-striped', 'pattern-polka', 'pattern-hearts');
            
            // Update pattern
            if (deviceCustomization.pattern === 'striped') {
                device.classList.add('pattern-striped');
            } else if (deviceCustomization.pattern === 'polka') {
                device.classList.add('pattern-polka');
            } else if (deviceCustomization.pattern === 'hearts') {
                device.classList.add('pattern-hearts');
            }
        }
        
        // Play sound with error handling
        function playSound(sound) {
            try {
                sound.currentTime = 0;
                sound.play().catch(error => {
                    console.log("Sound playback prevented:", error);
                });
            } catch (error) {
                console.log("Sound error:", error);
            }
        }
        
        // Power on the device
        function powerOn() {
            if (!isPoweredOn) {
                isPoweredOn = true;
                powerOnSound.volume = 0.5;
                playSound(powerOnSound);
                screen.classList.remove('screen-off');
                startupScreen.classList.remove('hidden');
                startupScreen.style.display = 'flex';
                screenContent.style.visibility = 'hidden';
                adoptionScreen.style.display = 'none';
                namingScreen.style.display = 'none';
                
                // Animate loading bar
                let progress = 0;
                const loadingInterval = setInterval(() => {
                    progress += 5;
                    startupLoadingBar.style.width = `${progress}%`;
                    
                    if (progress >= 100) {
                        clearInterval(loadingInterval);
                        setTimeout(() => {
                            startupScreen.style.display = 'none';
                            
                            // Show adoption screen if first time
                            if (isFirstTime) {
                                adoptionScreen.classList.remove('hidden');
                                adoptionScreen.style.display = 'flex';
                            } else {
                                screenContent.style.visibility = 'visible';
                            }
                        }, 500);
                    }
                }, 100);
                
                startWaterTimer();
                updateFertilizeButton();

                    
                if (plantData.growthStage == 6) {
                    btnFertilize.classList.add('disabled');
                    btnFertilize.textContent = `I'M GROWN`;
                }
            }
        }
        
        // Power off the device
        function powerOff() {
            if (isPoweredOn) {
                isPoweredOn = false;
                powerOffSound.volume = 0.3;
                playSound(powerOffSound);
                shutdownScreen.classList.remove('hidden');
                shutdownScreen.style.display = 'flex';
                screenContent.style.visibility = 'hidden';
                adoptionScreen.style.display = 'none';
                namingScreen.style.display = 'none';
                
                // Simple shutdown without animation
                setTimeout(() => {
                    shutdownScreen.style.display = 'none';
                    screen.classList.add('screen-off');
                }, 1500);
                
                clearInterval(waterTimer);
                clearInterval(fertilizeTimer);
                clearInterval(growthAnimationTimer);
                
                // Close any open modals
                closeAllModals();
            }
        }
        
        // Toggle power
        function togglePower() {
            if (isPoweredOn) {
                powerOff();
            } else {
                powerOn();
            }
        }
        
        // Water the plant
        function waterPlant() {
            if (!isPoweredOn) return;

            const waterSound = new Audio(`../Adopt-a-Plant/Sounds/water${ Math.floor(Math.random() * 3) + 1 }.mp3`);
            playSound(waterSound);
            
            // Check if already at 100% water before adding more
            if (plantData.waterLevel === 100) {
                wasOverwatered = true;
            } else {
                wasOverwatered = false;
                plantData.waterLevel = Math.min(100, plantData.waterLevel + 25);
            }
            
            plantData.timesWatered++;
            
            // Set last action to water
            lastAction = 'water';
            
            updateDisplay();
        }
        
        // Fertilize the plant
        function fertilizePlant() {
            if (!isPoweredOn || plantData.fertilizeCountdown > 0) return;
            const fertilizeSound = parseInt(plantData.growthStage) < 5 ? new Audio('../Adopt-a-Plant/Sounds/fertilize.mp3') : new Audio('../Adopt-a-Plant/Sounds/Mature.mp3');
            fertilizeSound.volume = 0.3;
            playSound(fertilizeSound);
            
            // Increase growth stage if not at max
            if (plantData.growthStage < 6) {
                plantData.growthStage++;
                
                // Show growth animation
                updatePlantImage(true);
            }
            
            // Set fertilize cooldown
            plantData.lastFertilized = new Date().toISOString();
            plantData.fertilizeCountdown = 24;
            
            // Set last action to fertilize
            lastAction = 'fertilize';
            
            updateDisplay();
            updateFertilizeButton();
        }
        
        // Open rename modal
        function openRenameModal() {
            if (!isPoweredOn) return;
            
            playSound(buttonSound);
            document.getElementById('newPlantName').value = plantData.name;
            renameModal.style.display = 'flex';
        }
        
        // Save new plant name
        function saveNewName() {
            playSound(buttonSound);
            const newName = document.getElementById('newPlantName').value.trim();
            if (newName) {
                plantData.name = newName.substring(0, 12); // Limit to 12 characters
                lastAction = 'rename'; // Set last action to rename
                updateDisplay();
            }
            renameModal.style.display = 'none';
        }
        
        // Open change plant modal
        function openChangePlantModal() {
            if (!isPoweredOn) return;
            
            playSound(buttonSound);
            
            // Update selected plant
            document.querySelectorAll('.plant-option').forEach(option => {
                if (option.dataset.plant === 'Weed') {
                    option.textContent = 'Marijuana';
                }
                option.classList.toggle('selected', option.dataset.plant === plantData.species);
            });
            
            changePlantModal.style.display = 'flex';
        }
        
        // Show change plant confirmation
        function showChangePlantConfirmation() {
            playSound(buttonSound);
            const selectedPlant = document.querySelector('.plant-option.selected');
            if (selectedPlant && selectedPlant.dataset.plant !== plantData.species) {
                selectedNewPlant = selectedPlant.dataset.plant;
                changePlantModal.style.display = 'none';
                changePlantConfirmModal.style.display = 'flex';
            } else {
                // If no change or no selection, just close the modal
                changePlantModal.style.display = 'none';
            }
        }
        
        // Confirm plant change
        function confirmPlantChange() {
            playSound(buttonSound);
            if (selectedNewPlant) {
                plantData.species = selectedNewPlant;
                plantData.growthStage = 1; // Reset growth stage
                plantData.lastFertilized = null; // Reset fertilize timer
                plantData.fertilizeCountdown = 0; // Reset fertilize countdown
                lastAction = 'change'; // Set last action to change
                updateDisplay();
                updateFertilizeButton(); // Update fertilize button state
                selectedNewPlant = null;
            }
            changePlantConfirmModal.style.display = 'none';
        }
        
        // Cancel plant change
        function cancelPlantChange() {
            playSound(buttonSound);
            selectedNewPlant = null;
            changePlantConfirmModal.style.display = 'none';
            changePlantModal.style.display = 'flex'; // Go back to plant selection
        }
        
        // Open stats modal
        function openStatsModal() {
            if (!isPoweredOn) return;
            
            playSound(buttonSound);
            
            // Update stats before showing
            document.getElementById('statName').textContent = plantData.name;
            document.getElementById('statWater').textContent = `${plantData.waterLevel}%`;
            document.getElementById('statAge').textContent = `${plantData.age} days`;
            document.getElementById('statSpecies').textContent = plantData.species === 'Weed' ? 'Marijuana' : plantData.species;
            document.getElementById('statGrowth').textContent = growthStageNames[plantData.growthStage] || `Stage ${plantData.growthStage}`;
            document.getElementById('statWatered').textContent = plantData.timesWatered;
            document.getElementById('statPersonality').textContent = plantData.personality.charAt(0).toUpperCase() + plantData.personality.slice(1);
            
            statsModal.style.display = 'flex';
        }
        
        // Open settings modal
        function openSettingsModal() {
            if (!isPoweredOn) return;
            
            playSound(buttonSound);
            
            // Update color picker
            document.getElementById('colorPicker').value = deviceCustomization.color;
            
            // Update pattern selection
            document.querySelectorAll('.pattern-option').forEach(option => {
                option.classList.toggle('selected', option.dataset.pattern === deviceCustomization.pattern);
            });
            
            // Update personality selection
            document.querySelectorAll('.personality-option').forEach(option => {
                option.classList.toggle('selected', option.dataset.personality === plantData.personality);
            });
            
            settingsModal.style.display = 'flex';
        }
        
        // Save settings
        function saveSettings() {
            playSound(buttonSound);
            
            // Save color
            deviceCustomization.color = parseInt(document.getElementById('colorPicker').value);
            
            // Save pattern
            const selectedPattern = document.querySelector('.pattern-option.selected');
            if (selectedPattern) {
                deviceCustomization.pattern = selectedPattern.dataset.pattern;
            }
            
            // Save personality
            const selectedPersonality = document.querySelector('.personality-option.selected');
            if (selectedPersonality) {
                plantData.personality = selectedPersonality.dataset.personality;
            }
            
            updateDeviceAppearance();
            updateDisplay();
            settingsModal.style.display = 'none';
        }
        
        // Open help modal
        function openHelpModal() {
            playSound(buttonSound);
            helpModal.style.display = 'flex';
        }
        
        // Open reset confirmation modal
        function openResetConfirmModal() {
            playSound(buttonSound);
            resetConfirmModal.style.display = 'flex';
        }
        
        // Reset plant
        function resetPlant() {
            playSound(buttonSound);
            plantData = {
                name: 'Sunny',
                species: 'Sunflower',
                waterLevel: 25,
                growthStage: 1,
                age: 0,
                timesWatered: 0,
                personality: 'cheerful',
                lastFertilized: null,
                fertilizeCountdown: 0,
                createdAt: new Date().toISOString()
            };
            
            lastAction = null;
            wasOverwatered = false;
            
            // Show adoption screen
            isFirstTime = true;
            screenContent.style.visibility = 'hidden';
            adoptionScreen.classList.remove('hidden');
            adoptionScreen.style.display = 'flex';
            namingScreen.style.display = 'none';
            
            // Reset plant selection
            plantSelectionOptions.forEach(option => {
                option.classList.remove('selected');
            });
            adoptButton.disabled = true;
            
            updateDisplay();
            updateFertilizeButton(); // Reset fertilize button
            resetConfirmModal.style.display = 'none';
            settingsModal.style.display = 'none';
        }
        
        // Close all modals
        function closeAllModals() {
            renameModal.style.display = 'none';
            changePlantModal.style.display = 'none';
            changePlantConfirmModal.style.display = 'none';
            statsModal.style.display = 'none';
            settingsModal.style.display = 'none';
            helpModal.style.display = 'none';
            resetConfirmModal.style.display = 'none';
        }
        
        // Select plant for adoption (first step)
        function selectPlantForAdoption() {
            playSound(buttonSound);
            const selectedPlant = document.querySelector('.plant-selection-option.selected');
            
            if (selectedPlant) {
                selectedPlantSpecies = selectedPlant.dataset.plant;
                
                // Hide adoption screen and show naming screen
                adoptionScreen.style.display = 'none';
                namingScreen.classList.remove('hidden');
                namingScreen.style.display = 'flex';
                
                // Focus on the name input
                plantNameInput.focus();
            }
        }
        
        // Confirm plant name and complete adoption (second step)
        function confirmPlantName() {
            playSound(buttonSound);
            const plantName = plantNameInput.value.trim();
            
            if (plantName && selectedPlantSpecies) {
                // Set up the new plant
                plantData.species = selectedPlantSpecies;
                plantData.name = plantName.substring(0, 12); // Limit to 12 characters
                plantData.growthStage = 1;
                plantData.waterLevel = 25;
                plantData.createdAt = new Date().toISOString();
                
                // Complete the adoption process
                isFirstTime = false;
                namingScreen.style.display = 'none';
                screenContent.style.visibility = 'visible';
                
                // Reset the input field for next time
                plantNameInput.value = '';
                
                // Update the display with the new plant
                updateDisplay();
                saveData();
            }
        }
        
        // Validate plant selection
        function validatePlantSelection() {
            const selectedPlant = document.querySelector('.plant-selection-option.selected');
            adoptButton.disabled = !selectedPlant;
        }
        
        // Validate plant name
        function validatePlantName() {
            const plantName = plantNameInput.value.trim();
            confirmNameButton.disabled = !plantName;
        }
        
        // Setup event listeners
        function setupEventListeners() {
            // Power button
            powerButton.addEventListener('click', togglePower);
            
            // Main buttons
            btnWater.addEventListener('click', () => {
                if (isPoweredOn) {
                    waterPlant();
                }
            });
            
            btnFertilize.addEventListener('click', () => {
                if (isPoweredOn && !btnFertilize.classList.contains('disabled')) {
                    fertilizePlant();
                }
            });
            
            // Secondary buttons
            btnRename.addEventListener('click', openRenameModal);
            btnChangePlant.addEventListener('click', openChangePlantModal);
            btnStats.addEventListener('click', openStatsModal);
            btnSettings.addEventListener('click', openSettingsModal);
            
            // Adoption screen
            plantSelectionOptions.forEach(option => {
                option.addEventListener('click', () => {
                    playSound(buttonSound);
                    plantSelectionOptions.forEach(p => p.classList.remove('selected'));
                    option.classList.add('selected');
                    validatePlantSelection();
                });
            });
            
            adoptButton.addEventListener('click', selectPlantForAdoption);
            
            // Naming screen
            plantNameInput.addEventListener('input', validatePlantName);
            confirmNameButton.addEventListener('click', confirmPlantName);
            
            // Rename modal
            document.getElementById('saveRenameBtn').addEventListener('click', saveNewName);
            document.getElementById('cancelRenameBtn').addEventListener('click', () => {
                playSound(buttonSound);
                renameModal.style.display = 'none';
            });
            
            // Change plant modal
            document.querySelectorAll('.plant-option').forEach(option => {
                option.addEventListener('click', () => {
                    playSound(buttonSound);
                    document.querySelectorAll('.plant-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    option.classList.add('selected');
                });
            });
            
            document.getElementById('savePlantBtn').addEventListener('click', showChangePlantConfirmation);
            document.getElementById('cancelPlantBtn').addEventListener('click', () => {
                playSound(buttonSound);
                changePlantModal.style.display = 'none';
            });
            
            // Change plant confirmation modal
            document.getElementById('confirmChangePlantBtn').addEventListener('click', confirmPlantChange);
            document.getElementById('cancelChangePlantBtn').addEventListener('click', cancelPlantChange);
            
            // Stats modal
            document.getElementById('closeStatsBtn').addEventListener('click', () => {
                playSound(buttonSound);
                statsModal.style.display = 'none';
            });
            
            // Settings modal
            document.getElementById('colorPicker').addEventListener('input', (e) => {
                const hue = e.target.value;
                if (hue >= 100 && hue <= 140) {
                    device.style.backgroundColor = '#4CAF50';
                    powerButton.style.backgroundColor = '#2E7D32'; // Darker green for power button
                } else {
                    device.style.backgroundColor = `hsl(${hue}, 100%, 85%)`;
                    powerButton.style.backgroundColor = `hsl(${hue}, 100%, 35%)`; // Darker version for power button
                }
            });
            
            document.querySelectorAll('.pattern-option').forEach(option => {
                option.addEventListener('click', () => {
                    playSound(buttonSound);
                    document.querySelectorAll('.pattern-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    option.classList.add('selected');
                });
            });
            
            document.querySelectorAll('.personality-option').forEach(option => {
                option.addEventListener('click', () => {
                    playSound(buttonSound);
                    document.querySelectorAll('.personality-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    option.classList.add('selected');
                });
            });
            
            document.getElementById('helpBtn').addEventListener('click', openHelpModal);
            document.getElementById('resetBtn').addEventListener('click', openResetConfirmModal);
            
            document.getElementById('saveSettingsBtn').addEventListener('click', saveSettings);
            document.getElementById('cancelSettingsBtn').addEventListener('click', () => {
                playSound(buttonSound);
                settingsModal.style.display = 'none';
            });
            
            // Help modal
            document.getElementById('closeHelpBtn').addEventListener('click', () => {
                playSound(buttonSound);
                helpModal.style.display = 'none';
            });
            
            // Reset confirmation modal
            document.getElementById('confirmResetBtn').addEventListener('click', resetPlant);
            document.getElementById('cancelResetBtn').addEventListener('click', () => {
                playSound(buttonSound);
                resetConfirmModal.style.display = 'none';
            });
        }
        
        // Initialize the app
        init();
    </script>
    
    <script>
        // Make the device draggable
        let isDragging = false;
        let offsetX, offsetY;

        // Mouse events for desktop
        device.addEventListener('mousedown', startDrag);
        document.addEventListener('mousemove', drag);
        document.addEventListener('mouseup', endDrag);

        // Touch events for mobile
        device.addEventListener('touchstart', startDragTouch);
        document.addEventListener('touchmove', dragTouch);
        document.addEventListener('touchend', endDrag);

        function startDrag(e) {
            isDragging = true;
            
            // Calculate the offset from the mouse position to the top-left corner of the device
            const rect = device.getBoundingClientRect();
            offsetX = e.clientX - rect.left;
            offsetY = e.clientY - rect.top;
            
            // Prevent text selection during drag
            e.preventDefault();
        }

        function startDragTouch(e) {
            if (e.touches.length === 1) {
                isDragging = true;
                
                const touch = e.touches[0];
                const rect = device.getBoundingClientRect();
                offsetX = touch.clientX - rect.left;
                offsetY = touch.clientY - rect.top;
                
                // Prevent scrolling during drag
                e.preventDefault();
            }
        }

        function drag(e) {
            if (!isDragging) return;
            
            // Remove the transform property and set direct positioning
            device.style.transform = 'none';
            device.style.left = (e.clientX - offsetX) + 'px';
            device.style.top = (e.clientY - offsetY) + 'px';
        }

        function dragTouch(e) {
            if (!isDragging || e.touches.length !== 1) return;
            
            const touch = e.touches[0];
            
            // Remove the transform property and set direct positioning
            device.style.transform = 'none';
            device.style.left = (touch.clientX - offsetX) + 'px';
            device.style.top = (touch.clientY - offsetY) + 'px';
            
            // Prevent scrolling during drag
            e.preventDefault();
        }

        function endDrag() {
            isDragging = false;
        }

        // Keep the device within the viewport bounds
        function keepInBounds() {
            const rect = device.getBoundingClientRect();
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            
            if (rect.right > viewportWidth) {
                device.style.left = (viewportWidth - rect.width) + 'px';
            }
            
            if (rect.bottom > viewportHeight) {
                device.style.top = (viewportHeight - rect.height) + 'px';
            }
            
            if (rect.left < 0) {
                device.style.left = '0px';
            }
            
            if (rect.top < 0) {
                device.style.top = '0px';
            }
        }

        // Check bounds when window is resized
        window.addEventListener('resize', keepInBounds);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9498412605f5e613',t:'MTc0ODg4MDk3OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><iframe height="1" width="1" style="position: absolute; top: 0px; left: 0px; border: none; visibility: hidden;"></iframe>

</body></html>